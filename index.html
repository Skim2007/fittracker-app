<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üí™ FitTracker Pro</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
        }

        .card h2 {
            color: #4c51bf;
            margin-bottom: 20px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #4a5568;
        }

        input, select {
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            transform: translateY(-2px);
        }

        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 10px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #4facfe, #00f2fe);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            color: white;
            box-shadow: 0 10px 30px rgba(79, 172, 254, 0.3);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .macros-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 15px;
        }

        .macro-card {
            background: linear-gradient(135deg, #fa709a, #fee140);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            color: white;
            font-weight: 600;
        }

        .progress-container {
            margin: 20px 0;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: #e2e8f0;
            border-radius: 6px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.5s ease;
        }

        .bmi-indicator {
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            font-weight: 600;
            margin-top: 15px;
        }

        .bmi-underweight { background: #3182ce; color: white; }
        .bmi-normal { background: #38a169; color: white; }
        .bmi-overweight { background: #d69e2e; color: white; }
        .bmi-obese { background: #e53e3e; color: white; }

        .prediction-card {
            background: linear-gradient(135deg, #a8edea, #fed6e3);
            padding: 20px;
            border-radius: 15px;
            margin-top: 15px;
            color: #2d3748;
        }

        .hidden { display: none; }

        .tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .tab {
            padding: 12px 20px;
            background: rgba(255,255,255,0.7);
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            color: #4a5568;
        }

        .tab.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            transform: translateY(-2px);
        }

        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .macros-grid {
                grid-template-columns: 1fr;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üí™ FitTracker Pro</h1>
            <p>Il tuo compagno fitness intelligente</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('setup')">üìù Setup</button>
            <button class="tab" onclick="showTab('stats')">üìä Statistiche</button>
            <button class="tab" onclick="showTab('nutrition')">üçé Nutrizione</button>
            <button class="tab" onclick="showTab('progress')">üéØ Progresso</button>
        </div>

        <!-- Setup -->
        <div id="setup-tab" class="card">
            <h2>üìù Configurazione Profilo</h2>
            <div class="form-grid">
                <div class="form-group">
                    <label for="age">Et√† (anni):</label>
                    <input type="number" id="age" min="13" max="100" placeholder="25" value="25">
                </div>
                <div class="form-group">
                    <label for="gender">Sesso:</label>
                    <select id="gender">
                        <option value="male">Maschio</option>
                        <option value="female">Femmina</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="height">Altezza (cm):</label>
                    <input type="number" id="height" min="100" max="250" placeholder="170" value="170">
                </div>
                <div class="form-group">
                    <label for="weight">Peso attuale (kg):</label>
                    <input type="number" id="weight" min="30" max="300" step="0.1" placeholder="70" value="70">
                </div>
                <div class="form-group">
                    <label for="activity">Livello attivit√†:</label>
                    <select id="activity">
                        <option value="1.2">Sedentario</option>
                        <option value="1.375">Leggermente attivo</option>
                        <option value="1.55" selected>Moderatamente attivo</option>
                        <option value="1.725">Molto attivo</option>
                        <option value="1.9">Estremamente attivo</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="goal">Obiettivo:</label>
                    <select id="goal">
                        <option value="lose">Perdere peso</option>
                        <option value="maintain" selected>Mantenere peso</option>
                        <option value="gain">Aumentare peso</option>
                    </select>
                </div>
            </div>
            <button class="btn" onclick="calculateAll()">üöÄ Calcola le tue metriche</button>
        </div>

        <!-- Statistiche -->
        <div id="stats-tab" class="card hidden">
            <h2>üìä Le Tue Metriche</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="bmi-value">0</div>
                    <div class="stat-label">BMI</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="bmr-value">0</div>
                    <div class="stat-label">BMR (kcal)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="tdee-value">0</div>
                    <div class="stat-label">TDEE (kcal)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="target-value">0</div>
                    <div class="stat-label">Calorie obiettivo</div>
                </div>
            </div>
            <div id="bmi-indicator" class="bmi-indicator"></div>
        </div>

        <!-- Nutrizione -->
        <div id="nutrition-tab" class="card hidden">
            <h2>üçé Piano Nutrizionale</h2>
            <div class="macros-grid">
                <div class="macro-card">
                    <div style="font-size: 1.5rem; font-weight: 700;" id="protein-value">0g</div>
                    <div>Proteine</div>
                </div>
                <div class="macro-card">
                    <div style="font-size: 1.5rem; font-weight: 700;" id="carbs-value">0g</div>
                    <div>Carboidrati</div>
                </div>
                <div class="macro-card">
                    <div style="font-size: 1.5rem; font-weight: 700;" id="fats-value">0g</div>
                    <div>Grassi</div>
                </div>
            </div>
        </div>

        <!-- Progresso -->
        <div id="progress-tab" class="card hidden">
            <h2>üéØ Simulazione Progresso</h2>
            <div class="form-group" style="margin-bottom: 15px;">
                <label for="target-weight">Peso obiettivo (kg):</label>
                <input type="number" id="target-weight" min="30" max="300" step="0.1" placeholder="65" value="65">
            </div>
            <button class="btn" onclick="calculateProgress()" style="margin-bottom: 20px;">üìà Calcola tempo stimato</button>
            
            <div id="progress-result" class="prediction-card hidden">
                <h3 style="margin-bottom: 15px;">üéØ Previsioni</h3>
                <div id="progress-text"></div>
                <div class="progress-container">
                    <div class="progress-bar">
                        <div id="progress-fill" class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>
                <div id="time-estimate"></div>
                <div id="recommendations" style="margin-top: 15px;"></div>
            </div>
        </div>
    </div>

    <script>
        let currentData = {};

        function showTab(tabName) {
            // Nascondi tutte le tab
            document.querySelectorAll('.card').forEach(card => card.classList.add('hidden'));
            // Rimuovi active da tutti i bottoni
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            
            // Mostra la tab selezionata
            document.getElementById(tabName + '-tab').classList.remove('hidden');
            // Attiva il bottone
            event.target.classList.add('active');
        }

        function calculateBMI(weight, height) {
            const heightM = height / 100;
            return (weight / (heightM * heightM)).toFixed(1);
        }

        function getBMICategory(bmi) {
            if (bmi < 18.5) return { category: 'underweight', text: 'Sottopeso', advice: 'Considera di aumentare leggermente il peso' };
            if (bmi < 25) return { category: 'normal', text: 'Normopeso', advice: 'Mantieni questo peso ideale!' };
            if (bmi < 30) return { category: 'overweight', text: 'Sovrappeso', advice: 'Un leggero calo di peso sarebbe benefico' };
            return { category: 'obese', text: 'Obesit√†', advice: 'Consigliato un piano per la perdita di peso' };
        }

        function calculateBMR(weight, height, age, gender) {
            if (gender === 'male') {
                return Math.round(88.362 + (13.397 * weight) + (4.799 * height) - (5.677 * age));
            } else {
                return Math.round(447.593 + (9.247 * weight) + (3.098 * height) - (4.330 * age));
            }
        }

        function calculateMacros(calories, goal) {
            let proteinRatio, carbRatio, fatRatio;
            
            switch(goal) {
                case 'lose':
                    proteinRatio = 0.35; carbRatio = 0.30; fatRatio = 0.35;
                    break;
                case 'gain':
                    proteinRatio = 0.25; carbRatio = 0.50; fatRatio = 0.25;
                    break;
                default:
                    proteinRatio = 0.30; carbRatio = 0.40; fatRatio = 0.30;
            }
            
            return {
                protein: Math.round((calories * proteinRatio) / 4),
                carbs: Math.round((calories * carbRatio) / 4),
                fats: Math.round((calories * fatRatio) / 9)
            };
        }

        function calculateAll() {
            const age = parseInt(document.getElementById('age').value) || 25;
            const gender = document.getElementById('gender').value;
            const height = parseFloat(document.getElementById('height').value) || 170;
            const weight = parseFloat(document.getElementById('weight').value) || 70;
            const activity = parseFloat(document.getElementById('activity').value) || 1.55;
            const goal = document.getElementById('goal').value;

            // Calcoli
            const bmi = calculateBMI(weight, height);
            const bmiInfo = getBMICategory(parseFloat(bmi));
            const bmr = calculateBMR(weight, height, age, gender);
            const tdee = Math.round(bmr * activity);
            
            let targetCalories = tdee;
            if (goal === 'lose') targetCalories -= 500;
            else if (goal === 'gain') targetCalories += 300;

            const macros = calculateMacros(targetCalories, goal);

            // Salva i dati
            currentData = { age, gender, height, weight, activity, goal, bmi, bmr, tdee, targetCalories, macros, bmiInfo };

            // Aggiorna UI
            updateStats();
            updateNutrition();

            // Mostra le statistiche
            showTab('stats');
            document.querySelector('.tab[onclick="showTab(\'stats\')"]').click();
        }

        function updateStats() {
            if (!currentData.bmi) return;

            document.getElementById('bmi-value').textContent = currentData.bmi;
            document.getElementById('bmr-value').textContent = currentData.bmr;
            document.getElementById('tdee-value').textContent = currentData.tdee;
            document.getElementById('target-value').textContent = currentData.targetCalories;

            const indicator = document.getElementById('bmi-indicator');
            indicator.textContent = `BMI: ${currentData.bmi} - ${currentData.bmiInfo.text}. ${currentData.bmiInfo.advice}`;
            indicator.className = `bmi-indicator bmi-${currentData.bmiInfo.category}`;
        }

        function updateNutrition() {
            if (!currentData.macros) return;

            document.getElementById('protein-value').textContent = currentData.macros.protein + 'g';
            document.getElementById('carbs-value').textContent = currentData.macros.carbs + 'g';
            document.getElementById('fats-value').textContent = currentData.macros.fats + 'g';
        }

        function calculateProgress() {
            if (!currentData.weight) {
                alert('Prima calcola le tue metriche nella sezione Setup!');
                return;
            }

            const targetWeight = parseFloat(document.getElementById('target-weight').value);
            if (!targetWeight) {
                alert('Inserisci un peso obiettivo valido!');
                return;
            }

            const currentWeight = currentData.weight;
            const weightDiff = Math.abs(currentWeight - targetWeight);
            const isLosing = currentWeight > targetWeight;
            
            // Calcolo tempo stimato (perdita: 0.5kg/settimana, guadagno: 0.3kg/settimana)
            const weeklyRate = isLosing ? 0.5 : 0.3;
            const weeksNeeded = Math.ceil(weightDiff / weeklyRate);
            const monthsNeeded = Math.ceil(weeksNeeded / 4);

            // Progresso attuale (simulato)
            const progressPercent = Math.min(100, (weightDiff * 10)); // Simulazione

            // Aggiorna UI
            document.getElementById('progress-result').classList.remove('hidden');
            document.getElementById('progress-text').innerHTML = `
                <strong>Peso attuale:</strong> ${currentWeight}kg ‚Üí <strong>Obiettivo:</strong> ${targetWeight}kg<br>
                <strong>Differenza:</strong> ${weightDiff.toFixed(1)}kg da ${isLosing ? 'perdere' : 'guadagnare'}
            `;
            
            document.getElementById('progress-fill').style.width = Math.min(progressPercent, 100) + '%';
            
            document.getElementById('time-estimate').innerHTML = `
                <h4>‚è±Ô∏è Tempo stimato</h4>
                <p><strong>${weeksNeeded} settimane</strong> (circa ${monthsNeeded} mes${monthsNeeded > 1 ? 'i' : 'e'})</p>
            `;

            // Raccomandazioni
            let recommendations = '';
            if (isLosing) {
                recommendations = `
                    <h4>üí° Raccomandazioni per perdere peso:</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Mantieni un deficit calorico di 500 kcal/giorno</li>
                        <li>Combina cardio (3-4 volte/settimana) con allenamento di forza</li>
                        <li>Bevi almeno 2L di acqua al giorno</li>
                        <li>Dormi 7-8 ore per notte</li>
                    </ul>
                `;
            } else if (targetWeight > currentWeight) {
                recommendations = `
                    <h4>üí° Raccomandazioni per aumentare peso:</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Surplus calorico di 300-500 kcal/giorno</li>
                        <li>Focus su allenamento di forza 4-5 volte/settimana</li>
                        <li>Aumenta l'assunzione di proteine</li>
                        <li>Mangia ogni 3-4 ore</li>
                    </ul>
                `;
            } else {
                recommendations = `
                    <h4>üí° Raccomandazioni per mantenere il peso:</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Mantieni le calorie di mantenimento</li>
                        <li>Allenamento misto: forza + cardio</li>
                        <li>Monitora il peso settimanalmente</li>
                        <li>Focus sulla composizione corporea</li>
                    </ul>
                `;
            }
            document.getElementById('recommendations').innerHTML = recommendations;
        }

        // Inizializzazione
        document.addEventListener('DOMContentLoaded', function() {
            // Calcola automaticamente con i valori predefiniti
            setTimeout(calculateAll, 100);
        });
    </script>
</body>
</html>
